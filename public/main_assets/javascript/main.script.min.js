function register(){var a=$(".itcamp-gallery ul li"),b=$(".timeline-description span"),c=$(".itcamp-contact").offset().top;dinocuteElem=$(".dinocute"),cShield=$(".c-overlay-shield"),cOverlayElem=$(".c-overlay"),cContainer=cOverlayElem.find(".c-container"),sShield=$(".s-overlay-shield"),sOverlayElem=$(".s-overlay"),sContainer=sOverlayElem.find(".s-container"),wavebackelem=$(".wavebackbg"),wavefrontelem=$(".wavefrontbg"),navbarElem=$(".navbar"),oldwinScrollY=0,$(".layer").each(function(){layerSet.push($(this))}),layerlength=layerSet.length,$.browser.device||(a.mouseover(function(){$(this).stop().animate({scale:1.2,z:0},6,"linear")}),a.mouseout(function(){$(this).stop().animate({scale:1,z:0},6,"linear")}),b.mouseover(function(){$(this).stop().animate({scale:1.2,z:0},6,"linear")}),b.mouseout(function(){$(this).stop().animate({scale:1,z:0},6,"linear")})),dinocuteElem.click(function(){if(!isDinocuteJumping){isDinocuteJumping=!0;var a=$(this).attr("src");$(this).attr("src","main_assets/img/timeline/dinocute_jumping.gif"),$(this).width("82px"),setTimeout(function(){jumpAudio.play()},300),setTimeout(function(){dinocuteElem.attr("src",a),dinocuteElem.width("80px"),isDinocuteJumping=!1},2100)}}),$(window).keydown(function(a){if($(window).scrollTop()>=c-window.innerHeight/2&&$(window).scrollTop()<=c+window.innerHeight/2){RemainAnimDinoCute=!0;var b;39==a.keyCode&&(Rightkeydown=!0,walkdelayflag||(walkdelayflag=!0,b=100*parseFloat(dinocuteElem.css("left"))/1050,dinocuteElem.css("transform","ScaleX(1)"),100>b&&dinocuteElem.css("left",b+.1+"%"),setTimeout(function(){walkdelayflag=!1},1e3/60)),RightKeyProcessed||(dinocuteElem.attr("src","main_assets/img/timeline/dinocute_walking.gif"),RightKeyProcessed=!0)),37==a.keyCode&&(Leftkeydown=!0,walkdelayflag||(walkdelayflag=!0,b=100*parseFloat(dinocuteElem.css("left"))/1050,dinocuteElem.css("transform","ScaleX(-1)"),b>0&&dinocuteElem.css("left",b-.1+"%"),setTimeout(function(){walkdelayflag=!1},1e3/60)),LeftKeyProcessed||(dinocuteElem.attr("src","main_assets/img/timeline/dinocute_walking.gif"),LeftKeyProcessed=!0))}else RemainAnimDinoCute&&(dinocuteElem.attr("src","main_assets/img/timeline/dinocute_still.gif"),calcDianocutePos(),RemainAnimDinoCute=!1,Rightkeydown=!1,RightKeyProcessed=!1,Leftkeydown=!1,LeftKeyProcessed=!1)}),$(window).keyup(function(a){39==a.keyCode&&(Leftkeydown||(dinocuteElem.attr("src","main_assets/img/timeline/dinocute_still.gif"),RemainAnimDinoCute=!1),Rightkeydown=!1,RightKeyProcessed=!1),37==a.keyCode&&(Rightkeydown||(dinocuteElem.attr("src","main_assets/img/timeline/dinocute_still.gif"),RemainAnimDinoCute=!1),Leftkeydown=!1,LeftKeyProcessed=!1)}),$.browser.device&&cContainer.attr("onclick","overlayToggle()")}function prepare(){if(calcDianocutePos(),smokeAnimateRnFn(),$(".itcamp-head .background").height(window.innerHeight),!$.browser.device&&window.innerWidth>1263){for(i=0;i<layerlength;i++)layerSet[i].attr("data-origOffsetY",parseInt(layerSet[i].offset().top+parseInt(layerSet[i].attr("data-addoffsety"))));for(i=0;i<layerlength;i++)$.Velocity.hook(layerSet[i],"translateY",parseInt(layerSet[i].attr("data-origOffsetY"))+"px");$("body").addClass("parallax"),$.browser.edge?$("body").height($(".dirtfront").offset().top+$(".dirtfront").height()-5):$("body").height($(".dirtfront").offset().top+$(".dirtfront").height()+395)}else $("body").addClass("static")}function smokeAnimateFn(){$(".smoke").animate({top:"-70px",opacity:"1"},1200,"linear").animate({top:"-100px",opacity:"0.0"},1600,"linear",function(){$(this).css("top","-45px"),$(this).css("opacity","0")})}function smokeAnimateRnFn(){smokeAnimateFn(),setInterval(function(){smokeAnimateFn()},6300)}function calcDianocutePos(){var a=new Date,b=a.getTime();14410404e5>b?(dinocuteElem.css("left","0%"),dinocuteElem.attr("src","main_assets/img/timeline/dinocute_still.gif")):14456196e5>b?dinocuteElem.css("left",18*normalize(14410404e5,14456196e5,b)+"%"):14463108e5>b?dinocuteElem.css("left",18+20*normalize(14456196e5,14463108e5,b)+"%"):14475204e5>b?dinocuteElem.css("left",38+22*normalize(14463108e5,14475204e5,b)+"%"):14479524e5>b?dinocuteElem.css("left",60+20*normalize(14475204e5,14479524e5,b)+"%"):14496804e5>b?dinocuteElem.css("left",80+20*normalize(14479524e5,14496804e5,b)+"%"):dinocuteElem.css("left","100%")}function normalize(a,b,c){var d=b-a;return(c-a)/d}function enlarge(a){var b="main_assets/img/pic/org_"+convertTwoZero(a)+".jpg";cContainer.append("<img src='"+b+"' />"),overlayToggle(a,b)}function overlayToggle(a,b){overlaytoggleflag?(cOverlayElem.velocity("fadeOut",{duration:400,easing:"linear"}),cShield.velocity("fadeOut",{duration:400,easing:"linear"}),cimage.remove(),cContainer.find(".close").hide(),cContainer.attr("style",""),$("body").css("overflow","auto"),overlaytoggleflag=!1):($("body").css("overflow","hidden"),cShield.velocity("fadeIn",{duration:400,easing:"linear"}),cOverlayElem.velocity("fadeIn",{duration:400,easing:"linear",complete:function(){loadflag[a]&&predictSize()}}),cimage=cContainer.find("img"),cimage.load(function(){predictSize(),loadflag[a]=!0}),cimage.delay(250).velocity("fadeIn",{duration:400,easing:"linear"}),cContainer.find(".close").show(),overlaytoggleflag=!0)}function predictSize(){if(overlaytoggleflag){var a=cimage.width(),b=cimage.height();console.log(a,b),a>b?(cContainer.css("width","90%"),cimage.css("width","100%"),cContainer.css("height",""),a=cimage.width(),b=cimage.height(),b>window.innerHeight&&(cContainer.css("height","90%"),cContainer.css("width",""),cimage.css("width",""))):(cContainer.css("height","90%"),cContainer.css("width",""),cimage.css("width",""),a=cimage.width(),b=cimage.height(),a>window.innerWidth&&(cContainer.css("width","90%"),cimage.css("width","100%"),cContainer.css("height","")))}}function overlayShareToggle(){overlaysharetoggleflag?(sOverlayElem.velocity("fadeOut",{duration:400,easing:"linear"}),sShield.velocity("fadeOut",{duration:400,easing:"linear"}),sContainer.find(".close").hide(),$("body").css("overflow","auto"),overlaysharetoggleflag=!1):($("body").css("overflow","hidden"),sShield.velocity("fadeIn",{duration:400,easing:"linear"}),sOverlayElem.velocity("fadeIn",{duration:400,easing:"linear"}),sContainer.find(".close").show(),overlaysharetoggleflag=!0)}function convertTwoZero(a){return 10>a?"0"+a:a}function scrollToBlock(a){if(!scrolltoflag){$.browser.device||(scrolltoflag=!0);var b;switch(a){case"home":b=$(".rainbow").offset().top;break;case"sponsor":b=$(".mountainfront").offset().top+400/720*window.innerHeight;break;case"camp":b=$(".itcamp-camp").offset().top-40;break;case"gallery":b=$(".itcamp-gallery").offset().top-90;break;case"opinion":b=$(".itcamp-opinion").offset().top-90;break;case"timeline":b=$(".itcamp-contact").offset().top-90;break;case"faq":b=$(".itcamp-contact .box-faq").offset().top-160;break;case"contact":b=$(".itcamp-contact .box-contact > h2").offset().top;break;default:b=0}$(window).scrollTop(b)}}$.browser.device=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()),$.browser.edge=/edge/i.test(navigator.userAgent.toLowerCase());var isSafari=0==navigator.vendor.indexOf("Apple")&&/\sSafari\//.test(navigator.userAgent);isSafari&&($.browser.device=!0);var layerSet=[],layerlength,scrolltoflag=!1,navbarflag=!1,isDinocuteJumping=!1,walkdelayflag=!1,RightKeyProcessed=!1,Rightkeydown=!1,LeftKeyProcessed=!1,Leftkeydown=!1,RemainAnimDinoCute=!1,wavebackelem,wavefrontelem,jumpAudio,dinocuteElem,navbarElem,cShield,cOverlayElem,cContainer,sShield,sOverlayElem,sContainer,overlaytoggleflag=!1,loadflag={},overlaysharetoggleflag=!1,cimage,oldwinScrollY;$(document).ready(function(){$(window).scrollTop(0),$("body").css("overflow","hidden"),jumpAudio=new Audio("main_assets/sound/MarioJump.wav")}),$(window).load(function(){register(),prepare(),$(".preloader").delay(1500).velocity("fadeOut",{duration:400,easing:"linear",complete:function(){$("body").css("overflow","auto")}})}),$(window).scroll(function(){var a=$(window).scrollTop();if(!$.browser.device&&window.innerWidth>1263){for(i=0;i<layerlength;i++)layerSet[i].stop().animate({y:parseInt(layerSet[i].attr("data-origOffsetY"))-a*parseFloat(layerSet[i].attr("data-scrollmodifier"))+"px",z:0},1400,"easeOutCubic",function(){scrolltoflag=!1});wavebackelem.stop().animate({backgroundPositionX:-(.06*a),z:0},1200,"easeOutCubic"),wavefrontelem.stop().animate({backgroundPositionX:.16*a,z:0},1200,"easeOutCubic")}$(window).scrollTop()>450?navbarflag||(navbarElem.stop().animate({top:"0px",z:0},450,"linear"),navbarflag=!0):0==$(window).scrollTop()&&navbarflag&&(navbarElem.stop().animate({top:"-125px",z:0},450,"linear"),navbarflag=!1),oldwinScrollY=a}),$(window).resize(function(){$(window).stop(),$("body").removeClass("parallax"),$("body").removeAttr("style"),$(".wavebackbg").removeAttr("style"),$(".wavefrontbg").removeAttr("style"),$(".layer").each(function(){$(this).removeAttr("style")}),$(".itcamp-head .background").height(window.innerHeight),prepare(),predictSize()});
